<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ä¸–ç•Œã®ã€Œæ„›ã—ã¦ã‚‹ã€</title>
<style>
  body {
    text-align: center;
    font-family: sans-serif;
    background: #f0f9ff;
    margin: 0;
    padding: 0;
  }
  h1 {
    font-size: 6vw;
    margin: 20px 0;
  }
  #heart-btn {
    font-size: 15vw; /* ã‚¹ãƒãƒ›ã§ã‚‚å¤§ããè¦‹ãˆã‚‹ */
    cursor: pointer;
    margin: 10vh 0 5vh;
    transition: transform 0.2s;
    position: relative;
  }
  #heart-btn:hover {
    transform: scale(1.2);
  }
  .love-text {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-size: 6vw;
    color: #e63946;
    animation: floatUp 2.5s forwards;
    white-space: nowrap;
  }
  @keyframes floatUp {
    0%   { opacity: 1; bottom: 60px; }
    100% { opacity: 0; bottom: 200px; }
  }
  #country-language-info {
    margin-top: 2vh;
    font-size: 4vw;
    color: #333;
    line-height: 1.5;
  }
  #history {
    margin: 5vh auto;
    padding: 10px;
    width: 90%;
    max-width: 600px;
    background: #ffffffcc;
    border: 1px solid #ccc;
    border-radius: 10px;
    text-align: left;
    font-size: 3.5vw;
  }
  #history h2 {
    font-size: 5vw;
    margin-bottom: 10px;
    text-align: center;
  }
  #history-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  #history-list li {
    padding: 5px 0;
    border-bottom: 1px solid #ddd;
  }
</style>
</head>
<body>
  <h1>ğŸŒ ä¸–ç•Œã®ã€Œæ„›ã—ã¦ã‚‹ã€</h1>
  <div id="heart-btn">â¤ï¸</div>
  <div id="country-language-info"></div>

  <!-- å±¥æ­´è¡¨ç¤º -->
  <div id="history">
    <h2>å±¥æ­´</h2>
    <ol id="history-list"></ol>
  </div>

  <script>
    let data = [];

    // JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
    fetch("countries.json")
      .then(res => res.json())
      .then(json => { data = json; });

    const btn = document.getElementById("heart-btn");
    const info = document.getElementById("country-language-info");
    const historyList = document.getElementById("history-list");

    btn.addEventListener("click", () => {
      if (data.length === 0) return;

      const random = data[Math.floor(Math.random() * data.length)];

      // ä¸Šã«æµ®ã‹ã¶ãƒ†ã‚­ã‚¹ãƒˆï¼ˆæ„›ã—ã¦ã‚‹ï¼‰
      const text = document.createElement("div");
      text.className = "love-text";
      text.style.bottom = "60px";
      text.innerText = random.text;
      btn.appendChild(text);

      // ä¸‹ã«å›ºå®šè¡¨ç¤º
      info.innerHTML = `${random.flag} ${random.country}ï¼ˆ${random.language}ï¼‰<br>ã€Œ${random.text}ã€ï¼ˆ${random.katakana}ï¼‰`;

      // å±¥æ­´ã«è¿½åŠ 
      const li = document.createElement("li");
      li.innerText = `${random.flag} ${random.country}ï¼ˆ${random.language}ï¼‰ï¼šã€Œ${random.text}ã€ï¼ˆ${random.katakana}ï¼‰`;
      historyList.insertBefore(li, historyList.firstChild); // æ–°ã—ã„ã‚‚ã®ã‚’ä¸Šã«è¿½åŠ 

      // ä¸€å®šæ™‚é–“ã§å‰Šé™¤ï¼ˆæµ®éŠã™ã‚‹æ–‡å­—ã ã‘ï¼‰
      setTimeout(() => {
        text.remove();
      }, 2500);
    });
  </script>
</body>
</html>
